79 constant linelen 
title user text @ host sp text "(" shell text ")" endtitle
?termcols linelen min blue line ?termcols linelen - 0 max blue line
?battery 100 < if
  ?battery 30 < dup
  if red else blue then text bat:
  invert if cyan then battery text % sp
then
?gitbranch if
  blue text git
  ?gitstashcount if text "[" magenta text + gitstashcount blue text "]" then
  text ":"
  ?gitbranch ?text "master" <> if
    blue text "<" magenta gitbranch blue text ">"
  then
 sp
then
green dir nl
blue time24 sp weekday sp
cyan host sp
green shell sign sp
